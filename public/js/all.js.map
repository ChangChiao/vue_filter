{"version":3,"sources":["index.js"],"names":["vm","Vue","el","data","nowType","arr","current","countOfPage","placeName","mainContentShow","selectLocation","dataList","pageShow","ifFree","singleData","zoneList","watch","computed","filteredRows","filter_name","location","entranceFee","temp","temp2","temp3","filter","item","Name","indexOf","d","Zone","length","includes","Ticketinfo","pageStart","totalPage","Math","ceil","tagData","array","console","log","ifCategoriesExist","ifLocationExist","methods","removeTag","index","splice","setPage","idx","changeFilter","param","goBack","toSinglePage","JSON","stringify","showNowPage","undefined","newArr","newCutArray","cutArray","old","star","end","newArray","i","push","oldArray","size","j","created","link","self","axios","get","then","response","result","records","$nextTick","catch","error","mounted","updated"],"mappings":"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","file":"all.js","sourcesContent":["\r\n//分頁組件\r\n// let pageStr =` <ul class=\"pagination\" >\r\n//             <li v-show=\"current != 1\" @click=\"current-- && goto(current)\" ><a href=\"#\">上一页</a></li>\r\n//             <li v-for=\"index in pages\" @click=\"goto(index)\" :class=\"{'active':current == index}\" :key=\"index\">\r\n//               <a href=\"#\" >{{index}}</a>\r\n//             </li>\r\n//             <li v-show=\"allpage != current && allpage != 0 \" @click=\"current++ && goto(current++)\"><a href=\"#\" >下一页</a></li>\r\n//         </ul>`;\r\n//  Vue.component(\"page\",{\r\n//       template:pageStr,\r\n//       props:['list'],\r\n//         data:function(){\r\n//           return{\r\n//             // listData:[],\r\n//             current:1,\r\n//             showItem:5,\r\n//           }\r\n//         },\r\n//         computed:{\r\n//           pages:function(){\r\n//                 var pag = [];\r\n//                   if( this.current < this.showItem ){ //如果当前的激活的项 小于要显示的条数\r\n//                        //总页数和要显示的条数那个大就显示多少条\r\n//                        var i = Math.min(this.showItem,this.allpage);\r\n//                        while(i){\r\n//                            pag.unshift(i--);\r\n//                        }\r\n//                    }else{ //当前页数大于显示页数了\r\n//                        var middle = this.current - Math.floor(this.showItem / 2 ),//从哪里开始\r\n//                            i = this.showItem;\r\n//                        if( middle >  (this.allpage - this.showItem)  ){\r\n//                            middle = (this.allpage - this.showItem) + 1\r\n//                        }\r\n//                        while(i--){\r\n//                            pag.push( middle++ );\r\n//                        }\r\n//                    }\r\n//                  return pag\r\n//                }  ,\r\n//           allpage(){\r\n//             return Math.ceil(this.list / 5);\r\n//           }\r\n//       },\r\n//       methods:{\r\n//         goto(index){\r\n//           if(index == this.current) return;\r\n//             this.current = index;\r\n//             this.$emit('goto',index);\r\n//              console.log('allpage' + this.list);\r\n//             console.log('allpage' + Math.ceil(this.list.length / 5));\r\n//         }\r\n//       },mounted(){\r\n\r\n//       }\r\n//     })\r\n\r\n\r\n\r\nlet vm = new Vue({\r\n  el:'.wrapper',\r\n  data:{\r\n    nowType:'location',\r\n    arr:[],\r\n    current:1,\r\n    countOfPage: 5,\r\n    placeName:'',\r\n    mainContentShow: true,\r\n    selectLocation:'',\r\n    dataList:[],\r\n    pageShow:[],\r\n    ifFree:[],\r\n    singleData:{},\r\n    zoneList:[\r\n      '三民區','內門區','美濃區','小港區','楠梓區','左營區','鼓山區','鹽埕區','前金區',\r\n      '新興區','苓雅區','前鎮區','旗津區','小港區','鳳山區','大寮區','鳥松區','林園區','仁武區','大樹區','大社區','岡山區','路竹區',\t\r\n      '橋頭區','梓官區','彌陀區','永安區','燕巢區','田寮區','阿蓮區','茄萣區','湖內區','旗山區','內門區','杉林區','甲仙區','六龜區','茂林區',\r\n      '桃源區','那瑪夏區'\r\n    ]\r\n  },\r\n  watch:{\r\n    // dataList:{\r\n    //   immediate: true,\r\n    // }\r\n  },\r\n  computed:{\r\n      filteredRows: function(){\r\n        let filter_name = this.placeName;\r\n        let location = this.selectLocation;\r\n        let entranceFee = this.ifFree;\r\n        let temp = [] , temp2 =[], temp3 =[];\r\n        if(filter_name !== ''){\r\n            temp = this.dataList.filter(function(item){ return item.Name.indexOf(filter_name) > -1; }) ;\r\n        }else{\r\n            temp = this.dataList;\r\n        }\r\n      \r\n        if(location !== ''){\r\n           temp2 = temp.filter(function(d){ return d.Zone.indexOf(location) > -1; }) ;    \r\n        }else{\r\n           temp2 = temp;\r\n        }\r\n        \r\n        if(entranceFee.length != 0){\r\n           temp3 = temp2.filter(function(d){ return entranceFee.includes(d.Ticketinfo)}) ; \r\n        }else{\r\n           temp3 = temp2;\r\n        }\r\n        \r\n        return temp3;\r\n      },\r\n      pageStart: function(){\r\n        return (this.current - 1) * this.countOfPage;\r\n      },\r\n      totalPage: function(){\r\n        return Math.ceil(this.filteredRows.length / this.countOfPage);\r\n      },\r\n      tagData(){\r\n        // let array = this.arr;\r\n           let array = this.ifFree;\r\n//         let location = this.selectLocation;\r\n//         let entranceFee = this.ifFree;\r\n//         array = entranceFee;\r\n//         let index = array.indexOf('');\r\n\r\n//         if (index !== -1) {\r\n//              array[index] = '門票入場';\r\n//         }\r\n//          array.push(location);\r\n//         let index = arr.indexOf('temp');\r\n\r\n//         if (index !== -1) {\r\n//              arr[index] = location;\r\n//         }\r\n//         if(entranceFee.length != 0 && this.ifCategoriesExist == false){\r\n//           arr = entranceFee;\r\n//           this.ifCategoriesExist =!this.ifCategoriesExist; \r\n//         }\r\n\r\n//         if(location!='' &&  this.ifLocationExist == false){\r\n//             arr.push(location);\r\n//           this.ifLocationExist = !this.ifLocationExist;\r\n//         }\r\n        console.log('array' + array);\r\n        return array;\r\n      },\r\n      ifCategoriesExist(){\r\n          let entranceFee = this.ifFree;\r\n          if(entranceFee.length == 0){\r\n            return false;\r\n          }else{\r\n            return true;\r\n          }\r\n      },\r\n      ifLocationExist(){\r\n          let location = this.selectLocation;\r\n          if(location == ''){\r\n            return false;\r\n          }else{\r\n            return true;\r\n          }\r\n        console.log(location);\r\n      }\r\n  },\r\n  methods:{\r\n    removeTag(index){\r\n      this.tagData.splice(index,1);\r\n    },\r\n    setPage: function(idx){\r\n      if( idx <= 0 || idx > this.totalPage ){\r\n        return;\r\n      }\r\n      this.current = idx;\r\n      \r\n    },\r\n    changeFilter(param){\r\n      this.nowType = param;\r\n    },\r\n    goBack(){\r\n      this.mainContentShow = true;\r\n    },\r\n    toSinglePage(item){\r\n      this.mainContentShow = false;\r\n      this.singleData = item;\r\n      console.log('ss' + JSON.stringify(this.singleData));\r\n    },\r\n    showNowPage(index){\r\n      if(index == undefined){\r\n        index =1;\r\n      }\r\n      let arr = this.dataList;\r\n      let newArr = this.newCutArray(arr,5);\r\n      // let i = Number(index);\r\n      this.pageShow = newArr[index];\r\n    },\r\n    cutArray(old,star,end){\r\n       let newArray=[];\r\n       for(var i =star;i<=end;i++){\r\n           newArray.push(old[i])\r\n       }\r\n       return newArray;\r\n    },\r\n    newCutArray(oldArray,size){\r\n       let newArray=[];\r\n       let j=1;\r\n       for(let i=0;i<oldArray.length;i++){\r\n           console.log(i==0||j==size);\r\n           j++\r\n\r\n           if( i==0||j==size){\r\n               console.log(i)\r\n               console.log(i+(size-1))\r\n               newArray.push(this.cutArray(oldArray,i,i+(size-1)));\r\n               j=0;\r\n           }\r\n       }\r\n       return newArray;\r\n    },\r\n\r\n  },\r\n  created(){\r\n      let link ='https://data.kcg.gov.tw/api/action/datastore_search?resource_id=92290ee5-6e61-456f-80c0-249eae2fcc97';\r\n      let self = this; //陷阱\r\n      axios.get(link)\r\n      .then(function (response) {\r\n        console.log(response);\r\n        console.log(response.data.result.records);\r\n        self.dataList = response.data.result.records;\r\n        self.$nextTick(() => self.showNowPage()); //callback\r\n      })\r\n      .catch(function (error) {\r\n        console.log('error');\r\n      });\r\n  },\r\n  mounted(){\r\n    // this.showNowPage();\r\n    \r\n  },updated(){\r\n  \r\n  }\r\n//   Filters(){\r\n    \r\n//   }\r\n});\r\n\r\n//axios\r\n\r\n\r\n// 資料格式\r\n\r\n"]}